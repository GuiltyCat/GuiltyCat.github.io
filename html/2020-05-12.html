<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Markdown To HTML:Markdown, HTML</title>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>
</head>
<body>
<a href="../index.html">トップ(TOP)</a>
<h1 id="Markdown To HTML:Markdown, HTML">Markdown To HTML:Markdown, HTML</h1>

<p>
<code>pandoc</code>がiPadで使えなかった．なのでMarkdownをHTMLに変換するものを自作することにした．
</p>

<p>
<code>sed</code>の連続でもいいのだが，あまり効率が良くないので，<code>awk</code>を使う．
</p>

<p>
厳密な文法に従わせるのは面倒なので，基本的な部分だけは抑えて，後は必要に応じて拡張することにする．
</p>


<p>
GNU拡張である<code>gensub</code>を使わずにいい感じに置換する方法を思いついたので，それについて書く．
</p>

<p>
これを使わない場合例えば，コードを表す\`で囲まれた文章を変更するには後方参照を使うだろう．でも標準だと偶数番目のマッチだけを変更したり，後方参照したりはできない．
</p>

<p>
そこで，以下のように挟まれた領域を<code>match</code>で検索し，<code>sub</code>を2回呼び出すことで，後方参照なしで同様の働きをできるようにした．
</p>

<p>
また，今回は行全体を変換したいので以下のように<code>while</code>でくるむ．
</p>

<pre><code>
var = $0;
white ( match(var, /`[^`]`/) != 0 ){
	sub("`", "<code>", var);
	sub("`", "</code>", var);
}
</code></pre>

<p>
これで<code>var</code>は上手くMarkdownのコード部分を解釈できる．
</p>
<a href="../index.html">トップ(TOP)</a>
</body>
</html>
