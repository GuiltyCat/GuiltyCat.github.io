<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Googleの検索結果にGitHub Pagesを載せる (GitHub Pages on Google Search):Google Search Console</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<a href="../index.html">トップ(TOP)</a>
<header id="title-block-header">
<h1 class="title">Googleの検索結果にGitHub Pagesを載せる (GitHub Pages on Google Search):Google Search Console</h1>
</header>
<p>中々このサイトがGoogle検索にかからないので，色々としてみた記録を残しておく．</p>
<p>まず<code>sitemap.xml</code>が必要だということで，<code>_config.yml</code>を一番上のディレクトリに置く．</p>
<p>内容は以下である．</p>
<pre class="plugins:"><code>  - jekyll-sitemap```

サイトを検索結果に表示させたいのであって，中身に興味はないので追いておく．

これで`https://{user_name}.github.io/sitemap.xml`にアクセスして，URL一覧が見れるようになった．

でお次はどうしろと書いてあったかというと，Google Search Consoleに登録してインデクシングをしろとのことだった．

やり方がよく分からなかったが，とりあえず以下のURLで飛んでみると，オーナーですか？と聞かれるURLが出るのでクリックした．

```site:https://{user_name}.github.io```

するとプロパティタイプの選択というのが表示された．

そこでドメイン名である`{user_name.github.io}`をで確認を押すと，ログインしてDNS設定をしろと出た．そんな設定GitHub Pagesになかったぞ．

というわけで，URLプレフィックスで登録しておくことにした．

すると何やらgooglexxxxx.htmlを直下に置けとかいう指示があった．言われた通りに置いて認証すると成功した．


さらにサイトマップを登録すればよいということだったので，左からサイトマップをクリックし，新しいサイトマップの追加を選択．そして，先程`_config.yml`を追加することで生成された`sitemap.xml`を登録する．

ここまでは簡単にできたのだが，インデクシングにはもっと時間がかかるそうだ．で，インデックスのカバレッジを見ると，

```データを処理しています．1日後にもう一度ご確認下さい```

いやいや，もう2日目ですけど．なにやら1週間ぐらいかかるとか．でもネットのニュースとか数分で検索結果に出ているのに．こんな他の記事へのリンクを貼らない，へんちくりんなサイトは後回しということか．もうちょっと待ってみることにする．

2020/04/29 AM
------------

であれから一日たったが，ついに検索結果に表示された．ちなみに広告について文句を書いた[この記事](../html/2020-04-26.html)．なんだけどMarkdownの方が登録されている．しかも，古い命名規則のMarkdownファイルの方だ．だからリンク先が存在しない．

- 旧名と新名
</code></pre>
<p>20200426.md 2020-04-26.md```</p>
<p>そっちじゃない．</p>
<p>しかもなんでhtmlじゃなくてMarkdownなんだよ．Markdownのリンクはindex.htmlに貼ってないから<code>sitemap.xml</code>にも載ってないのに．</p>
<p>トップページより先に，生Markdownだけ公開されてしまいました．</p>
<h2 id="am">2020/04/29 AM</h2>
<p>あれから色々と探っていると，mdだけ登録された理由が分かった．</p>
<p>Googleは<code>sitemap.xml</code>が更新されても自分からは見に行かないようだ．だから古いサイトを登録しようとしてしまったようだ．</p>
<p>ここで問題だったのはjekyllがmdから自動でhtmlを作成していたのだ．だから，mdからjekyllが自動生成したhtmlがmd/xx.htmlとして，私が<code>mnake</code>でmdから自動で生成したhtmlがhtml/xx.htmlとして登録されていた．</p>
<p>つまり同じようなサイトが二つ存在していたのだ．そしてGoogleは<code>sitemap.xml</code>の最初に載っていた，md/xx.htmlの方を見に行ったと思われる．</p>
<p>ここで問題なのが，<code>sitemap.xml</code>からクロールする先を見にいったタイミングで，私がページの命名規則を変更し，アップロードしていたようなのだ．だから，<code>sitemap.xml</code>に登録されていたファイルが見つからなくなり，インデクシングに失敗していたのだ．</p>
<p>Googleちゃんは正しく動いてくれていたのに，私の対応が悪かったのだ．</p>
<a href="../index.html">トップ(TOP)</a>
</body>
</html>
